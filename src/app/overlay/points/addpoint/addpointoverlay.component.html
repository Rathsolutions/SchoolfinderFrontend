<!--Copyright 2020 Nico Rath Rathsolutions, licensed under GPLv3. For more information about the license have a look into the file LICENSE-->
<div [ngStyle]="{ display: visible ? 'block' : 'none' }">
  <mat-card style="max-width: inherit; width: 450px; margin: 10px">
    <mat-card-header>
      <mat-card-title>Institution hinzufügen</mat-card-title>
      <mat-card-subtitle
        >In diesem Menü können Sie eine Institution
        hinzufügen</mat-card-subtitle
      >
    </mat-card-header>
    <mat-card-content>
      <form
        class="propertiesForm"
        [formGroup]="newPointForm"
        (ngSubmit)="onSubmit()"
      >
        <div style="margin-left: 16px">
          <mat-form-field style="max-width: 40%">
            <mat-label>Institutionskategorie</mat-label>
            <mat-select
              [formControl]="projectCategory"
              multiple
              required
              (opened)="institutionCategoryOpened()"
            >
              <mat-option
                *ngFor="let category of projectCategories"
                [value]="category"
                >{{ category.name }}</mat-option
              >
            </mat-select>
          </mat-form-field>
          <mat-form-field style="margin-left: 22px; max-width: 40%">
            <mat-label>Primärkategorie</mat-label>
            <mat-select [formControl]="projectPrimaryCategory" required>
              <mat-option
                *ngFor="let category of projectCategory.value"
                [value]="category"
                >{{ category.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div>
          <div>
            <mat-form-field style="margin-left: 16px; max-width: 40%">
              <mat-label>Institutionsname</mat-label>
              <input matInput [formControl]="schoolName" />
            </mat-form-field>
            <mat-form-field style="margin-left: 16px; max-width: 40%">
              <mat-label>Institutionsabkürzung</mat-label>
              <input matInput [formControl]="shortSchoolName" />
            </mat-form-field>
          </div>
          <div style="margin-left: 16px">
            <button
              type="button"
              mat-raised-button
              color="primary"
              class="button-50"
              (click)="fileInput.click()"
            >
              Institutionsbild hochladen
            </button>
            <input
              #fileInput
              (change)="handleFileInput($event.target.files)"
              type="file"
              id="file"
              accept="image/*"
            />
          </div>
          <div>
            <img
              #schoolPicture
              [src]="image"
              style="margin-left: 16px; width: 100%; margin-top: 20px"
            />
          </div>
          <div style="margin-left: 16px" *ngIf="image">
            <mat-form-field style="width: 98%">
              <mat-label>Alternativtext des Bildes</mat-label>
              <input matInput [formControl]="alternativePictureText" />
            </mat-form-field>
          </div>
          <!--Additional general information-->
          <mat-expansion-panel>
            <mat-expansion-panel-header [collapsedHeight]="collapsedHeight">
              <mat-panel-title class="expansionsPanelHeaderTitle">
                Allgemeine Informationen
              </mat-panel-title>
              <!-- <mat-panel-description>
                Allgemeine Informationen zur Institution
              </mat-panel-description> -->
            </mat-expansion-panel-header>
            <div>
              <mat-form-field appearance="fill">
                <mat-label>Schulart</mat-label>
                <mat-select [formControl]="kind">
                  <mat-option
                    *ngFor="let kind of allSchoolTypes"
                    [value]="kind.schoolTypeValue"
                    >{{ kind.schoolTypeValue }}</mat-option
                  >
                </mat-select>
              </mat-form-field>
            </div>
            <div>
              <mat-form-field>
                <mat-label>Adresse</mat-label>
                <input matInput [formControl]="address" required />
              </mat-form-field>
            </div>
            <div>
              <mat-form-field>
                <mat-label>Telefonnummer</mat-label>
                <input matInput [formControl]="generalPhoneNumber" required />
              </mat-form-field>
            </div>
            <div>
              <mat-form-field>
                <mat-label>E-Mail</mat-label>
                <input matInput [formControl]="generalEmail" />
              </mat-form-field>
            </div>
            <div>
              <mat-form-field>
                <mat-label>Homepage</mat-label>
                <input matInput [formControl]="homepage" />
              </mat-form-field>
            </div>
          </mat-expansion-panel>
          <!--End additional general information-->

          <mat-accordion>
            <div #addPersonOverlay></div>
            <div class="spaceAround">
              <button
                mat-raised-button
                color="primary"
                class="button-50"
                (click)="addPersonButton()"
                style="margin-left: 16px"
              >
                Person hinzufügen
              </button>
            </div>
            <div
              style="margin-top: 10px; margin-bottom: 10px"
              #additionalInformationPlaceholder
            ></div>
            <div class="spaceAround">
              <button
                style="margin-right: 10px; margin-left: 16px"
                class="button-50"
                mat-raised-button
                color="primary"
                (click)="addAdditionalInformationButton()"
                type="button"
              >
                Zusatzeigenschaft hinzufügen
              </button>
            </div>
            <div
              style="margin-top: 10px; margin-bottom: 10px"
              #criteriaPlaceholder
            ></div>
            <div class="spaceAround">
              <button
                style="margin-right: 10px; margin-left: 16px"
                class="button-50"
                mat-raised-button
                color="primary"
                (click)="addCriteriaButton()"
                type="button"
              >
                Kriterium hinzufügen
              </button>
            </div>
          </mat-accordion>
        </div>
        <div style="margin-top: 10px; margin-left: 16px">
          <button
            mat-raised-button
            color="warn"
            type="button"
            (click)="setVisible(false)"
          >
            Abbrechen
          </button>
          <button
            mat-raised-button
            color="primary"
            type="submit"
            style="margin-left: 10px"
          >
            Eintragen
          </button>
          <button
            mat-raised-button
            color="warn"
            type="button"
            (click)="deleteCurrent()"
            style="margin-left: 10px"
          >
            Löschen
          </button>
        </div>
      </form>
      <!-- <div mat-dialog-actions>
  <button mat-button (click)="onNoClick()">Abbruch</button>
  <button mat-button [mat-dialog-close]="data" cdkFocusInitial>Ok</button>
</div> -->
    </mat-card-content>
  </mat-card>
</div>
